# A script for basic software installations for NYPL's Digital Archives department.
echo "Installing xcode-stuff"
xcode-select --install

# Check for Homebrew,
# Install if we don't have it
if test ! $(which brew); then
  echo "Installing homebrew..."
  ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
fi

brew tap richardlehane/digipres
# Update homebrew recipes
echo "Updating homebrew..."
brew update

echo "Installing Git..."
brew install git

#To do: prompt for Git config
#echo "Git config"
#git config --global user.name "Your Name"
#git config --global user.email brad@bradparbs.com

echo "Installing other brew stuff..."
brew install tree
brew install wget
brew install trash

brew install p7zip
brew install rsync
brew install richardlehane/digipres/siegfried
brew install m5deep
brew install bagit
brew install disktype
brew install gnu-tar
brew install python@3.8
brew install rbenv
brew install jenv

#Brew cask section
brew install --cask vlc
brew install --cask virtualbox
brew install --cask mediainfo 

#other stuff- tbd
pip install bagit

# Update profile
# Test what shell is used
case $SHELL in
*/zsh) 
  profile="$HOME/.zshrc"
  ;;
*/bash)
  profile="$HOME/.bash_profile"
  ;;
*)
  exit
esac

# Configure rbenv
if ! grep -q "rbenv" $profile; then
  echo '# Configure rbenv
  export PATH="$HOME/.rbenv/bin:$PATH"
  eval "$(rbenv init -)"
  ' >> $profile;
fi

# Configure jenv
if ! grep -q "jenv" $profile; then
  echo '# Configure jenv
  export PATH="$HOME/.jenv/bin:$PATH"
  eval "$(jenv init -)"
  ' >> $profile;
fi

#VS Code extension
# git extensions
code --install-extension github.vscode-pull-request-github
code --install-extension streetsidesoftware.code-spell-checker

#markdown
code --install-extension DavidAnson.vscode-markdownlint
code --install-extension yzhang.markdown-all-in-one

#data formats
code --install-extension DotJoshJohnson.xml
code --install-extension mechatroner.rainbow-csv

#coding
code --install-extension ms-python.python

# terminal 
code --install-extension foxundermoon.shell-format
code --install-extension bmalehorn.shell-syntax
code --install-extension ms-vscode-remote.remote-ssh
code --install-extension ms-vscode-remote.remote-ssh-edit
code --install-extension ms-toolsai.jupyter